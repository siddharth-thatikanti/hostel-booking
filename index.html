<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StayMate - Smart Hostel Booking at Your Fingertips</title>
    
    <!-- External CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.0/nouislider.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    
    <style id="app-style">
        :root {
            --primary-color: #5E17EB;
            --secondary-color: #FF9800;
            --dark-color: #121212;
            --light-color: #f8f9fa;
            --border-radius: 10px;
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: var(--transition);
            background-color: var(--light-color);
            color: #333;
            margin: 0;
            overflow-x: hidden;
        }
        
        body.dark-theme {
            background-color: var(--dark-color);
            color: #e0e0e0;
        }
        
        .navbar {
            background: linear-gradient(135deg, var(--primary-color), #7046e0);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        }
        
        .navbar-brand {
            font-size: 1.6rem;
            font-weight: bold;
            color: white !important;
        }
        
        .logo-text {
            margin-left: 10px;
        }
        
        .theme-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 50%;
            transition: var(--transition);
        }
        
        .auth-buttons .btn {
            border-radius: 20px;
            padding: 8px 20px;
            margin-left: 10px;
            font-weight: 600;
        }
        
        #map {
            height: calc(100vh - 62px);
            width: 100%;
            z-index: 1;
        }
        
        .sidebar {
            position: absolute;
            top: 62px;
            left: 0;
            width: 360px;
            height: calc(100vh - 62px);
            background-color: rgba(255, 255, 255, 0.95);
            box-shadow: 3px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 2;
            overflow-y: auto;
            transition: transform 0.3s ease;
        }
        
        body.dark-theme .sidebar {
            background-color: rgba(30, 30, 30, 0.95);
        }
        
        .sidebar-collapsed {
            transform: translateX(-330px);
        }
        
        .sidebar-toggle {
            position: absolute;
            right: -15px;
            top: 20px;
            width: 30px;
            height: 50px;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.2);
        }
        
        .sidebar-content {
            padding: 20px;
        }
        
        .location-input {
            position: relative;
            margin-bottom: 20px;
        }
        
        .location-input input {
            padding-left: 40px;
            border-radius: var(--border-radius);
            border: 1px solid #ddd;
            font-size: 1rem;
            height: 45px;
        }
        
        body.dark-theme .location-input input {
            background-color: #333;
            color: white;
            border-color: #555;
        }
        
        .location-input i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
        }
        
        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
        }

        body.dark-theme .suggestions {
            background-color: #333;
            border-color: #555;
        }

        .suggestion-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        body.dark-theme .suggestion-item {
            border-color: #444;
        }

        .suggestion-item:hover { background-color: #f5f5f5; }
        body.dark-theme .suggestion-item:hover { background-color: #444; }
        
        .location-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .location-actions button {
            flex: 1;
            padding: 10px;
            border-radius: var(--border-radius);
            font-weight: 500;
            border: none;
            background-color: var(--primary-color);
            color: white;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .location-actions button:hover {
            opacity: 0.9;
        }
        
        .filter-section {
            margin-bottom: 25px;
        }
        
        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }
        
        body.dark-theme .filter-header {
            border-color: #444;
        }
        
        .filter-header h5 {
            margin: 0;
            font-weight: 600;
        }
        
        .price-slider {
            margin: 20px 10px;
            height: 10px;
        }
        
        .price-inputs {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .price-inputs input {
            width: 45%;
            text-align: center;
            border-radius: var(--border-radius);
            border: 1px solid #ddd;
            padding: 5px;
        }
        
        body.dark-theme .price-inputs input {
            background-color: #333;
            color: white;
            border-color: #555;
        }
        
        .filter-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .filter-chip {
            padding: 8px 15px;
            background-color: #e9ecef;
            border-radius: 20px;
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            user-select: none;
        }
        
        body.dark-theme .filter-chip {
            background-color: #333;
        }
        
        .filter-chip.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .amenities-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .amenity-item {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .amenity-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid #ddd;
            border-radius: 4px;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        body.dark-theme .amenity-checkbox {
            border-color: #555;
        }
        
        .amenity-checkbox.checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .amenity-checkbox.checked i {
            color: white;
            font-size: 12px;
        }
        
        .sort-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .sort-option {
            padding: 8px 15px;
            background-color: #e9ecef;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            flex-grow: 1;
            text-align: center;
        }
        
        body.dark-theme .sort-option {
            background-color: #333;
        }
        
        .sort-option.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .hostel-list {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .hostel-card {
            background-color: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }
        
        .hostel-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        body.dark-theme .hostel-card {
            background-color: #252525;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .hostel-image {
            height: 140px;
            width: 100%;
            object-fit: cover;
        }
        
        .hostel-content {
            padding: 12px;
        }
        
        .hostel-title {
            font-weight: 600;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .hostel-location {
            color: #666;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        body.dark-theme .hostel-location {
            color: #bbb;
        }
        
        .hostel-location i {
            font-size: 0.8rem;
            margin-right: 5px;
        }
        
        .hostel-features {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .hostel-feature {
            font-size: 0.8rem;
            color: #666;
            display: flex;
            align-items: center;
        }
        
        body.dark-theme .hostel-feature {
            color: #bbb;
        }
        
        .hostel-feature i {
            margin-right: 3px;
            font-size: 0.75rem;
        }
        
        .hostel-bottom {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .hostel-price {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .hostel-rating {
            display: flex;
            align-items: center;
            background-color: var(--primary-color);
            color: white;
            padding: 2px 8px;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .hostel-rating i {
            font-size: 0.7rem;
            margin-right: 3px;
        }
        
        .detail-sheet {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            display: none;
        }
        
        .detail-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: white;
            border-radius: 20px 20px 0 0;
            max-height: 90%;
            overflow-y: auto;
            transform: translateY(100%);
            transition: transform 0.4s ease;
        }
        
        body.dark-theme .detail-content {
            background-color: #202020;
        }
        
        .detail-content.active {
            transform: translateY(0);
        }
        
        .detail-header {
            padding: 15px 20px;
            position: sticky;
            top: 0;
            background-color: white;
            z-index: 1;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        body.dark-theme .detail-header {
            background-color: #202020;
            border-color: #444;
        }
        
        .close-detail {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            color: #555;
        }
        
        body.dark-theme .close-detail {
            color: #ccc;
        }
        
        .photo-carousel {
            height: 250px;
            position: relative;
            overflow: hidden;
        }
        
        .carousel-images {
            display: flex;
            transition: transform 0.5s ease;
            height: 100%;
        }
        
        .carousel-images img {
            width: 100%;
            height: 100%;
            flex-shrink: 0;
            object-fit: cover;
        }
        
        .carousel-controls {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }
        
        .carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
        }
        
        .carousel-dot.active {
            background-color: white;
            transform: scale(1.2);
        }
        
        .detail-body {
            padding: 20px;
        }
        
        .detail-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .detail-location {
            color: #777;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        body.dark-theme .detail-location {
            color: #bbb;
        }
        
        .detail-location i {
            margin-right: 5px;
        }
        
        .detail-rating {
            display: inline-flex;
            align-items: center;
            background-color: var(--primary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            margin-bottom: 15px;
        }
        
        .detail-rating i {
            margin-right: 5px;
        }
        
        .detail-section {
            margin-bottom: 25px;
        }
        
        .detail-section-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .detail-section-title i {
            margin-right: 8px;
            color: var(--primary-color);
        }
        
        .facilities {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .facility {
            display: flex;
            align-items: center;
            background-color: #f5f5f5;
            padding: 8px 15px;
            border-radius: 20px;
        }
        
        body.dark-theme .facility {
            background-color: #333;
        }
        
        .facility i {
            margin-right: 8px;
            color: var(--primary-color);
        }
        
        .room-types {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .room-type {
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 15px;
            border: 1px solid #eee;
        }
        
        body.dark-theme .room-type {
            background-color: #252525;
            border-color: #444;
        }
        
        .room-type-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .room-type-name {
            font-weight: 600;
        }
        
        .room-type-price {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .room-type-details {
            color: #777;
            font-size: 0.9rem;
        }
        
        body.dark-theme .room-type-details {
            color: #bbb;
        }
        
        .availability-dates {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding-bottom: 10px;
            margin-top: 10px;
        }
        
        .date-block {
            min-width: 50px;
            text-align: center;
            padding: 5px;
            border-radius: 5px;
            background-color: #e9ecef;
        }
        
        body.dark-theme .date-block {
            background-color: #333;
        }
        
        .date-block.available {
            background-color: #d4edda;
            color: #155724;
        }
        
        body.dark-theme .date-block.available {
            background-color: #264e33;
            color: #e0f3e6;
        }
        
        .date-block.unavailable {
            background-color: #f8d7da;
            color: #721c24;
            text-decoration: line-through;
        }
        
        body.dark-theme .date-block.unavailable {
            background-color: #4e2626;
            color: #f8d7da;
        }
        
        .date-block .date {
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .date-block .day {
            font-size: 0.8rem;
        }
        
        .reviews-section {
            margin-top: 25px;
        }
        
        .review-stats {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .review-rating {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .review-count {
            color: #777;
        }
        
        body.dark-theme .review-count {
            color: #bbb;
        }
        
        .review-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        body.dark-theme .review-item {
            border-color: #444;
        }
        
        .review-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .reviewer-name {
            font-weight: 600;
        }
        
        .review-date {
            color: #777;
            font-size: 0.85rem;
        }
        
        body.dark-theme .review-date {
            color: #bbb;
        }
        
        .review-rating-stars {
            color: var(--secondary-color);
            margin-bottom: 8px;
        }
        
        .review-text {
            color: #555;
            font-size: 0.95rem;
        }
        
        body.dark-theme .review-text {
            color: #ddd;
        }
        
        .add-review-btn {
            display: inline-block;
            margin-top: 15px;
            background-color: #f8f9fa;
            color: #555;
            border: 1px solid #ddd;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        body.dark-theme .add-review-btn {
            background-color: #333;
            color: #ddd;
            border-color: #444;
        }
        
        .add-review-btn:hover {
            background-color: #e9ecef;
        }
        
        body.dark-theme .add-review-btn:hover {
            background-color: #444;
        }
        
        .book-now-container {
            position: sticky;
            bottom: 0;
            background-color: white;
            padding: 15px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #eee;
        }
        
        body.dark-theme .book-now-container {
            background-color: #202020;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
            border-color: #444;
        }
        
        .book-price {
            font-size: 1.2rem;
            font-weight: 700;
        }
        
        .book-now-btn {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .book-now-btn:hover {
            opacity: 0.9;
        }
        
        /* Booking Modal */
        .booking-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 200;
            align-items: center;
            justify-content: center;
        }
        
        .booking-content {
            background-color: white;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 20px;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        body.dark-theme .booking-content {
            background-color: #252525;
        }
        
        .booking-modal.active .booking-content {
            transform: translateY(0);
            opacity: 1;
        }
        
        .booking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .booking-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .close-booking {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            color: #555;
        }
        
        body.dark-theme .close-booking {
            color: #ccc;
        }
        
        .booking-steps {
            display: flex;
            margin-bottom: 20px;
        }
        
        .booking-step {
            flex: 1;
            text-align: center;
            position: relative;
        }
        
        .step-number {
            width: 25px;
            height: 25px;
            background-color: #e9ecef;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        body.dark-theme .step-number {
            background-color: #333;
        }
        
        .booking-step.active .step-number {
            background-color: var(--primary-color);
            color: white;
        }
        
        .step-name {
            font-size: 0.9rem;
            color: #777;
        }
        
        body.dark-theme .step-name {
            color: #bbb;
        }
        
        .booking-step.active .step-name {
            color: var(--primary-color);
            font-weight: 600;
        }
        
        body.dark-theme .booking-step.active .step-name {
            color: var(--primary-color);
        }
        
        .booking-step:not(:last-child):after {
            content: "";
            position: absolute;
            top: 12px;
            right: -50%;
            width: 100%;
            height: 2px;
            background-color: #e9ecef;
            z-index: -1;
        }
        
        body.dark-theme .booking-step:not(:last-child):after {
            background-color: #333;
        }
        
        .booking-step.active:not(:last-child):after {
            background-color: var(--primary-color);
        }
        
        .booking-form {
            margin-top: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border-radius: var(--border-radius);
            border: 1px solid #ddd;
        }
        
        body.dark-theme .form-control {
            background-color: #333;
            color: white;
            border-color: #555;
        }
        
        .date-picker {
            position: relative;
        }
        
        .date-picker i {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
        }
        
        .room-selector {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .room-option {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }
        
        body.dark-theme .room-option {
            border-color: #555;
        }
        
        .room-option:hover {
            background-color: #f8f9fa;
        }
        
        body.dark-theme .room-option:hover {
            background-color: #2c2c2c;
        }
        
        .room-option.selected {
            border-color: var(--primary-color);
            background-color: rgba(94, 23, 235, 0.1);
        }
        
        body.dark-theme .room-option.selected {
            background-color: rgba(94, 23, 235, 0.2);
        }
        
        .room-option-header {
            display: flex;
            justify-content: space-between;
        }
        
        .room-option-name {
            font-weight: 500;
        }
        
        .room-option-price {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .room-option-details {
            font-size: 0.9rem;
            color: #777;
            margin-top: 5px;
        }
        
        body.dark-theme .room-option-details {
            color: #bbb;
        }
        
        .coupon-container {
            display: flex;
            gap: 10px;
        }
        
        .coupon-container input {
            flex: 1;
        }
        
        .apply-coupon {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            padding: 10px 15px;
            cursor: pointer;
            white-space: nowrap;
        }
        
        .booking-summary {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-top: 20px;
        }
        
        body.dark-theme .booking-summary {
            background-color: #2c2c2c;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .summary-total {
            font-weight: 600;
            border-top: 1px solid #ddd;
            padding-top: 10px;
            margin-top: 10px;
        }
        
        body.dark-theme .summary-total {
            border-color: #444;
        }
        
        .booking-actions {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
        
        .back-btn {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            background-color: white;
            border-radius: var(--border-radius);
            cursor: pointer;
        }
        
        body.dark-theme .back-btn {
            background-color: #333;
            border-color: #444;
            color: white;
        }
        
        .continue-btn {
            flex: 2;
            padding: 10px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
        }
        
        .payment-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .payment-option {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        body.dark-theme .payment-option {
            border-color: #444;
        }
        
        .payment-option.selected {
            border-color: var(--primary-color);
            background-color: rgba(94, 23, 235, 0.1);
        }
        
        body.dark-theme .payment-option.selected {
            background-color: rgba(94, 23, 235, 0.2);
        }
        
        .payment-radio {
            width: 20px;
            height: 20px;
            border: 2px solid #ddd;
            border-radius: 50%;
            margin-right: 15px;
            position: relative;
        }
        
        body.dark-theme .payment-radio {
            border-color: #555;
        }
        
        .payment-option.selected .payment-radio {
            border-color: var(--primary-color);
        }
        
        .payment-option.selected .payment-radio:after {
            content: "";
            width: 10px;
            height: 10px;
            background-color: var(--primary-color);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .payment-logo {
            width: 40px;
            height: 25px;
            object-fit: contain;
            margin-right: 10px;
        }
        
        .payment-name {
            flex: 1;
            font-weight: 500;
        }
        
        .payment-form {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
        }
        
        body.dark-theme .payment-form {
            background-color: #2c2c2c;
        }
        
        .confirmation-icon {
            width: 80px;
            height: 80px;
            background-color: #d4edda;
            color: #155724;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            font-size: 2.5rem;
        }
        
        body.dark-theme .confirmation-icon {
            background-color: #264e33;
            color: #e0f3e6;
        }
        
        .confirmation-message {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .booking-details {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }
        
        body.dark-theme .booking-details {
            background-color: #2c2c2c;
        }
        
        .booking-detail-item {
            display: flex;
            margin-bottom: 10px;
        }
        
        .detail-label {
            flex: 1;
            font-weight: 500;
        }
        
        .detail-value {
            flex: 2;
        }
        
        /* Auth Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 300;
            align-items: center;
            justify-content: center;
        }
        
        .auth-content {
            background-color: white;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 400px;
            padding: 25px;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        body.dark-theme .auth-content {
            background-color: #252525;
        }
        
        .auth-modal.active .auth-content {
            transform: translateY(0);
            opacity: 1;
        }
        
        .auth-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .auth-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        body.dark-theme .auth-tabs {
            border-color: #444;
        }
        
        .auth-tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            transition: var(--transition);
        }
        
        .auth-tab.active {
            border-bottom-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .social-login {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .social-btn {
            flex: 1;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }
        
        body.dark-theme .social-btn {
            border-color: #444;
        }
        
        .social-btn:hover {
            background-color: #f8f9fa;
        }
        
        body.dark-theme .social-btn:hover {
            background-color: #333;
        }
        
        .social-btn i {
            margin-right: 10px;
        }
        
        .divider {
            text-align: center;
            position: relative;
            margin: 20px 0;
        }
        
        .divider::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background-color: #ddd;
        }
        
        body.dark-theme .divider::before {
            background-color: #444;
        }
        
        .divider span {
            background-color: white;
            padding: 0 10px;
            position: relative;
            color: #777;
        }
        
        body.dark-theme .divider span {
            background-color: #252525;
            color: #bbb;
        }
        
        .submit-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .submit-btn:hover {
            opacity: 0.9;
        }
        
        .auth-footer {
            margin-top: 20px;
            text-align: center;
            font-size: 0.9rem;
            color: #777;
        }
        
        body.dark-theme .auth-footer {
            color: #bbb;
        }
        
        .auth-footer a {
            color: var(--primary-color);
            font-weight: 500;
            text-decoration: none;
        }
        
        /* Custom Leaflet Marker */
        .hostel-marker {
            background-color: var(--primary-color);
            border-radius: 50% 50% 50% 0;
            width: 30px;
            height: 30px;
            transform: rotate(-45deg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .hostel-marker span {
            transform: rotate(45deg);
        }
        
        .hostel-marker:hover {
            transform: rotate(-45deg) scale(1.2);
        }
        
        .hostel-popup {
            width: 200px;
        }
        
        .leaflet-popup-content-wrapper {
            border-radius: var(--border-radius) !important;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                transform: translateY(calc(100vh - 150px));
                height: calc(100vh - 62px);
                left: 0;
                border-radius: var(--border-radius) var(--border-radius) 0 0;
                box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.1);
            }
            
            .sidebar-collapsed {
                transform: translateY(calc(100vh - 50px));
            }
            
            .sidebar-toggle {
                width: 50px;
                height: 5px;
                top: 15px;
                right: 50%;
                transform: translateX(50%);
                border-radius: var(--border-radius) var(--border-radius) 0 0;
                padding: 0;
            }
            
            .sidebar-toggle i {
                display: none;
            }
            
            .detail-content {
                max-height: 80%;
            }
            
            .booking-step:not(:last-child):after {
                right: -40%;
                width: 80%;
            }
        }
        
        /* NoUiSlider Custom Styles */
        .noUi-connect {
            background: var(--primary-color);
        }
        
        .noUi-handle {
            border-radius: 50%;
            background: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            width: 20px !important;
            height: 20px !important;
            right: -10px !important;
        }
        
        .noUi-handle:after,
        .noUi-handle:before {
            display: none;
        }
        
        /* Flatpickr Custom Styles */
        body.dark-theme .flatpickr-calendar {
            background-color: #252525;
            color: white;
            box-shadow: 0 3px 13px rgba(0, 0, 0, 0.5);
        }
        
        body.dark-theme .flatpickr-day {
            color: #ddd;
        }
        
        body.dark-theme .flatpickr-day.prevMonthDay,
        body.dark-theme .flatpickr-day.nextMonthDay {
            color: #777;
        }
        
        body.dark-theme .flatpickr-day.selected {
            background: var(--primary-color);
            color: white;
        }
        
        body.dark-theme .flatpickr-day:hover {
            background: #333;
        }
        
        body.dark-theme .flatpickr-current-month,
        body.dark-theme .flatpickr-weekday {
            color: #ddd;
        }
        
        body.dark-theme .flatpickr-months .flatpickr-prev-month svg,
        body.dark-theme .flatpickr-months .flatpickr-next-month svg {
            fill: #ddd;
        }
        
        /* Loading animations */
        @keyframes pulse {
            0% {
                opacity: 0.6;
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0.6;
            }
        }
        
        .skeleton {
            background-color: #e9ecef;
            animation: pulse 1.5s infinite;
        }
        
        body.dark-theme .skeleton {
            background-color: #333;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="javascript:void(0)">
                <i class="fas fa-bed"></i>
                <span class="logo-text">StayMate</span>
            </a>
            <div class="d-flex">
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="auth-buttons">
                    <button class="btn btn-outline-light" id="login-btn">Login</button>
                    <button class="btn btn-light" id="register-btn">Register</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Map -->
        <div id="map"></div>

        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-toggle" id="sidebar-toggle">
                <i class="fas fa-chevron-right"></i>
            </div>
            <div class="sidebar-content">
                <!-- Location Input -->
                <div class="location-input">
                    <i class="fas fa-search"></i>
                    <input type="text" class="form-control" placeholder="Search for location" id="location-search" autocomplete="off">
                    <div id="suggestions" class="suggestions" style="display:none;"></div>
                </div>
                
                <div class="location-actions">
                    <button id="search-btn"><i class="fas fa-search"></i> Search Area</button>
                    <button id="location-btn"><i class="fas fa-location-arrow"></i> My Location</button>
                </div>
                
                <!-- Price Filter -->
                <div class="filter-section">
                    <div class="filter-header">
                        <h5>Price Range</h5>
                    </div>
                    <div id="price-slider" class="price-slider"></div>
                    <div class="price-inputs">
                        <input type="number" id="min-price" placeholder="Min">
                        <input type="number" id="max-price" placeholder="Max">
                    </div>
                </div>
                
                <!-- Bed Type Filter -->
                <div class="filter-section">
                    <div class="filter-header">
                        <h5>Bed Type</h5>
                    </div>
                    <div class="filter-chips">
                        <div class="filter-chip" data-filter="single">Single Bed</div>
                        <div class="filter-chip" data-filter="double">Double Bed</div>
                        <div class="filter-chip" data-filter="dormitory">Dormitory</div>
                    </div>
                </div>
                
                <!-- Gender Filter -->
                <div class="filter-section">
                    <div class="filter-header">
                        <h5>Gender</h5>
                    </div>
                    <div class="filter-chips">
                        <div class="filter-chip" data-filter="male">Male</div>
                        <div class="filter-chip" data-filter="female">Female</div>
                        <div class="filter-chip" data-filter="unisex">Unisex</div>
                    </div>
                </div>
                
                <!-- Amenities Filter -->
                <div class="filter-section">
                    <div class="filter-header">
                        <h5>Amenities</h5>
                    </div>
                    <div class="amenities-grid">
                        <div class="amenity-item" data-amenity="ac">
                            <div class="amenity-checkbox"><i class="fas fa-check"></i></div>
                            <span>AC</span>
                        </div>
                        <div class="amenity-item" data-amenity="wifi">
                            <div class="amenity-checkbox"><i class="fas fa-check"></i></div>
                            <span>Wi-Fi</span>
                        </div>
                        <div class="amenity-item" data-amenity="food">
                            <div class="amenity-checkbox"><i class="fas fa-check"></i></div>
                            <span>Food Included</span>
                        </div>
                        <div class="amenity-item" data-amenity="laundry">
                            <div class="amenity-checkbox"><i class="fas fa-check"></i></div>
                            <span>Laundry</span>
                        </div>
                        <div class="amenity-item" data-amenity="power">
                            <div class="amenity-checkbox"><i class="fas fa-check"></i></div>
                            <span>Power Backup</span>
                        </div>
                    </div>
                </div>
                
                <!-- Sort Options -->
                <div class="filter-section">
                    <div class="filter-header">
                        <h5>Sort By</h5>
                    </div>
                    <div class="sort-options">
                        <div class="sort-option active" data-sort="price">Price</div>
                        <div class="sort-option" data-sort="rating">Rating</div>
                        <div class="sort-option" data-sort="distance">Distance</div>
                    </div>
                </div>
                
                <!-- Hostel List -->
                <div class="hostel-list" id="hostel-list">
                    <!-- This will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Hostel Detail Sheet -->
        <div class="detail-sheet" id="detail-sheet">
            <div class="detail-content">
                <div class="detail-header">
                    <h4>Hostel Details</h4>
                    <button class="close-detail" id="close-detail">Ã—</button>
                </div>
                <div class="photo-carousel">
                    <div class="carousel-images" id="carousel-images">
                        <!-- Images will be added dynamically -->
                    </div>
                    <div class="carousel-controls" id="carousel-controls">
                        <!-- Dots will be added dynamically -->
                    </div>
                </div>
                <div class="detail-body">
                    <h2 class="detail-title" id="detail-title">Hostel Name</h2>
                    <div class="detail-location" id="detail-location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Location</span>
                    </div>
                    <button class="btn btn-outline-primary w-100 my-3" id="get-directions-btn">
                        <i class="fas fa-directions"></i> Get Directions
                    </button>
                    <div class="detail-rating">
                        <i class="fas fa-star"></i>
                        <span id="detail-rating">4.5</span>
                        <span> (120 reviews)</span>
                    </div>
                    
                    <div class="detail-section">
                        <div class="detail-section-title">
                            <i class="fas fa-info-circle"></i>
                            Description
                        </div>
                        <p id="detail-description">
                            This is the description of the hostel. It includes details about the hostel, its surroundings, and any other important information that would help the user make a decision.
                        </p>
                    </div>
                    
                    <div class="detail-section">
                        <div class="detail-section-title">
                            <i class="fas fa-check-circle"></i>
                            Facilities
                        </div>
                        <div class="facilities" id="detail-facilities">
                            <!-- Facilities will be added dynamically -->
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <div class="detail-section-title">
                            <i class="fas fa-bed"></i>
                            Room Types
                        </div>
                        <div class="room-types" id="room-types">
                            <!-- Room types will be added dynamically -->
                        </div>
                    </div>
                    
                    <div class="detail-section reviews-section">
                        <div class="detail-section-title">
                            <i class="fas fa-comment"></i>
                            Reviews
                        </div>
                        <div class="review-stats">
                            <div class="review-rating" id="review-rating">4.5</div>
                            <div class="review-count" id="review-count">Based on 120 reviews</div>
                        </div>
                        <div id="reviews-list">
                            <!-- Reviews will be added dynamically -->
                        </div>
                        <button class="add-review-btn">
                            <i class="fas fa-plus"></i> Add Review
                        </button>
                    </div>
                </div>
                
                <div class="book-now-container">
                    <div class="book-price">
                        From <span id="book-price">â‚¹500</span> / night
                    </div>
                    <button class="book-now-btn" id="book-now">Book Now</button>
                </div>
            </div>
        </div>

        <!-- Booking Modal -->
        <div class="booking-modal" id="booking-modal">
            <div class="booking-content">
                <div class="booking-header">
                    <div class="booking-title">Book Your Stay</div>
                    <button class="close-booking" id="close-booking">Ã—</button>
                </div>
                
                <div class="booking-steps">
                    <div class="booking-step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-name">Dates</div>
                    </div>
                    <div class="booking-step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-name">Details</div>
                    </div>
                    <div class="booking-step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-name">Payment</div>
                    </div>
                    <div class="booking-step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-name">Confirm</div>
                    </div>
                </div>
                
                <!-- Step 1: Date Selection -->
                <div class="booking-form" id="booking-step-1">
                    <div class="form-group">
                        <label class="form-label">Check-in / Check-out Dates</label>
                        <div class="date-picker">
                            <input type="text" class="form-control" id="date-range" placeholder="Select dates">
                            <i class="far fa-calendar-alt"></i>
                        </div>
                    </div>
                    
                    <div class="booking-actions">
                        <button class="continue-btn" id="step1-continue">Continue</button>
                    </div>
                </div>
                
                <!-- Step 2: Room Details -->
                <div class="booking-form" id="booking-step-2" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Select Room Type</label>
                        <div class="room-selector" id="room-selector">
                            <!-- Room options will be added dynamically -->
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Number of Guests</label>
                        <select class="form-control" id="guest-count">
                            <option value="1">1 Person</option>
                            <option value="2">2 People</option>
                            <option value="3">3 People</option>
                            <option value="4">4 People</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Have a Coupon?</label>
                        <div class="coupon-container">
                            <input type="text" class="form-control" id="coupon-code" placeholder="Enter coupon code">
                            <button class="apply-coupon">Apply</button>
                        </div>
                    </div>
                    
                    <div class="booking-summary">
                        <div class="summary-item">
                            <div>Room Charges</div>
                            <div>â‚¹<span id="room-charges">1000</span></div>
                        </div>
                        <div class="summary-item">
                            <div>Taxes & Fees</div>
                            <div>â‚¹<span id="taxes-fees">100</span></div>
                        </div>
                        <div class="summary-item summary-total">
                            <div>Total</div>
                            <div>â‚¹<span id="total-amount">1100</span></div>
                        </div>
                    </div>
                    
                    <div class="booking-actions">
                        <button class="back-btn" id="step2-back">Back</button>
                        <button class="continue-btn" id="step2-continue">Continue to Payment</button>
                    </div>
                </div>
                
                <!-- Step 3: Payment -->
                <div class="booking-form" id="booking-step-3" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Select Payment Method</label>
                        <div class="payment-options">
                            <div class="payment-option selected" data-payment="card">
                                <div class="payment-radio"></div>
                                <img src="https://cdn.pixabay.com/photo/2016/08/17/04/43/template-1599667_960_720.png" alt="Card" class="payment-logo">
                                <div class="payment-name">Credit/Debit Card</div>
                            </div>
                            <div class="payment-option" data-payment="upi">
                                <div class="payment-radio"></div>
                                <img src="https://cdn.pixabay.com/photo/2018/06/05/15/25/pay-3455615_960_720.png" alt="UPI" class="payment-logo">
                                <div class="payment-name">UPI</div>
                            </div>
                            <div class="payment-option" data-payment="netbanking">
                                <div class="payment-radio"></div>
                                <img src="https://cdn.pixabay.com/photo/2016/02/04/13/49/the-internet-1179323_960_720.png" alt="Net Banking" class="payment-logo">
                                <div class="payment-name">Net Banking</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-form" id="card-payment-form">
                        <div class="form-group">
                            <label class="form-label">Card Number</label>
                            <input type="text" class="form-control" placeholder="1234 5678 9012 3456">
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <div class="form-group">
                                    <label class="form-label">Expiry Date</label>
                                    <input type="text" class="form-control" placeholder="MM/YY">
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <label class="form-label">CVV</label>
                                    <input type="text" class="form-control" placeholder="123">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Name on Card</label>
                            <input type="text" class="form-control" placeholder="John Doe">
                        </div>
                    </div>
                    
                    <div class="booking-summary">
                        <div class="summary-item summary-total">
                            <div>Total Amount</div>
                            <div>â‚¹<span id="payment-total">1100</span></div>
                        </div>
                    </div>
                    
                    <div class="booking-actions">
                        <button class="back-btn" id="step3-back">Back</button>
                        <button class="continue-btn" id="step3-continue">Pay Now</button>
                    </div>
                </div>
                
                <!-- Step 4: Confirmation -->
                <div class="booking-form" id="booking-step-4" style="display: none;">
                    <div class="confirmation-icon">
                        <i class="fas fa-check"></i>
                    </div>
                    <div class="confirmation-message">
                        <h3>Booking Confirmed!</h3>
                        <p>Your booking has been successfully confirmed. You'll receive an email with all the details.</p>
                    </div>
                    
                    <div class="booking-details">
                        <div class="booking-detail-item">
                            <div class="detail-label">Booking ID:</div>
                            <div class="detail-value" id="booking-id">BK12345678</div>
                        </div>
                        <div class="booking-detail-item">
                            <div class="detail-label">Hostel:</div>
                            <div class="detail-value" id="booking-hostel">Hostel Name</div>
                        </div>
                        <div class="booking-detail-item">
                            <div class="detail-label">Check-in:</div>
                            <div class="detail-value" id="booking-checkin">Jan 15, 2025</div>
                        </div>
                        <div class="booking-detail-item">
                            <div class="detail-label">Check-out:</div>
                            <div class="detail-value" id="booking-checkout">Jan 20, 2025</div>
                        </div>
                        <div class="booking-detail-item">
                            <div class="detail-label">Room Type:</div>
                            <div class="detail-value" id="booking-roomtype">Single Bed AC</div>
                        </div>
                        <div class="booking-detail-item">
                            <div class="detail-label">Guests:</div>
                            <div class="detail-value" id="booking-guests">1</div>
                        </div>
                        <div class="booking-detail-item">
                            <div class="detail-label">Total Amount:</div>
                            <div class="detail-value" id="booking-amount">â‚¹1100</div>
                        </div>
                    </div>
                    
                    <div class="booking-actions">
                        <button class="continue-btn" id="step4-done">View My Bookings</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Authentication Modal -->
        <div class="auth-modal" id="auth-modal">
            <div class="auth-content">
                <div class="auth-header">
                    <h4 id="auth-title">Login</h4>
                    <button class="close-booking" id="close-auth">Ã—</button>
                </div>
                
                <div class="auth-tabs">
                    <div class="auth-tab active" data-tab="login">Login</div>
                    <div class="auth-tab" data-tab="register">Register</div>
                </div>
                
                <!-- Login Form -->
                <div id="login-form">
                    <div class="social-login">
                        <div class="social-btn">
                            <i class="fab fa-google"></i> Google
                        </div>
                        <div class="social-btn">
                            <i class="fab fa-facebook-f"></i> Facebook
                        </div>
                        <div class="social-btn">
                            <i class="fab fa-apple"></i> Apple
                        </div>
                    </div>
                    
                    <div class="divider">
                        <span>or login with email</span>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" placeholder="your@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" placeholder="********">
                    </div>
                    
                    <div class="form-check mb-3">
                        <input type="checkbox" class="form-check-input" id="remember-me">
                        <label class="form-check-label" for="remember-me">Remember me</label>
                    </div>
                    
                    <button class="submit-btn">Login</button>
                    
                    <div class="auth-footer">
                        <p>Forgot password? <a href="javascript:void(0)">Reset it</a></p>
                    </div>
                </div>
                
                <!-- Register Form -->
                <div id="register-form" style="display: none;">
                    <div class="social-login">
                        <div class="social-btn">
                            <i class="fab fa-google"></i> Google
                        </div>
                        <div class="social-btn">
                            <i class="fab fa-facebook-f"></i> Facebook
                        </div>
                        <div class="social-btn">
                            <i class="fab fa-apple"></i> Apple
                        </div>
                    </div>
                    
                    <div class="divider">
                        <span>or register with email</span>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-control" placeholder="John Doe">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" placeholder="your@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" placeholder="********">
                    </div>
                    
                    <div class="form-check mb-3">
                        <input type="checkbox" class="form-check-input" id="terms-agree">
                        <label class="form-check-label" for="terms-agree">I agree to the <a href="javascript:void(0)">Terms of Service</a> and <a href="javascript:void(0)">Privacy Policy</a></label>
                    </div>
                    
                    <button class="submit-btn">Register</button>
                    
                    <div class="auth-footer">
                        <p>Already have an account? <a href="javascript:void(0)" id="switch-to-login">Login</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- External Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.0/nouislider.min.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>

    <script id="app-script">
        // Initialize the map
        const map = L.map('map').setView([28.6139, 77.2090], 13);
        
        // Add tile layer (map style)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);
        
        // Global variables
        let isDarkTheme = false;
        let hostels = [];
        let currentHostelId = null;
        let currentStep = 1;
        let selectedRoomType = null;
        let currentRoutingControl = null;
        let locationWatchId = null;
        
        // DOM Elements
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const themeToggle = document.getElementById('theme-toggle');
        const hostelList = document.getElementById('hostel-list');
        const detailSheet = document.getElementById('detail-sheet');
        const closeDetail = document.getElementById('close-detail');
        const bookNowBtn = document.getElementById('book-now');
        const bookingModal = document.getElementById('booking-modal');
        const closeBooking = document.getElementById('close-booking');
        const loginBtn = document.getElementById('login-btn');
        const registerBtn = document.getElementById('register-btn');
        const authModal = document.getElementById('auth-modal');
        const closeAuth = document.getElementById('close-auth');
        const authTabs = document.querySelectorAll('.auth-tab');
        const switchToLogin = document.getElementById('switch-to-login');
        const locationBtn = document.getElementById('location-btn');
        const searchBtn = document.getElementById('search-btn');
        const locationInput = document.getElementById('location-search');
        const suggestionBox = document.getElementById('suggestions');
        const getDirectionsBtn = document.getElementById('get-directions-btn');
        
        // Event Listeners
        sidebarToggle.addEventListener('click', toggleSidebar);
        themeToggle.addEventListener('click', toggleTheme);
        closeDetail.addEventListener('click', closeDetailSheet);
        bookNowBtn.addEventListener('click', openBookingModal);
        closeBooking.addEventListener('click', closeBookingModal);
        loginBtn.addEventListener('click', () => openAuthModal('login'));
        registerBtn.addEventListener('click', () => openAuthModal('register'));
        closeAuth.addEventListener('click', closeAuthModal);
        switchToLogin.addEventListener('click', () => switchAuthTab('login'));
        locationBtn.addEventListener('click', getUserLocation);
        searchBtn.addEventListener('click', searchCurrentArea);
        locationInput.addEventListener('input', handleLocationSearch);
        getDirectionsBtn.addEventListener('click', getDirections);
        document.addEventListener('click', (e) => {
            if (!locationInput.contains(e.target) && !suggestionBox.contains(e.target)) {
                suggestionBox.style.display = 'none';
            }
        });
        
        // Initialize price slider
        const priceSlider = document.getElementById('price-slider');
        noUiSlider.create(priceSlider, {
            start: [500, 5000],
            connect: true,
            range: {
                'min': 100,
                'max': 10000
            },
            step: 100,
            format: {
                to: function (value) {
                    return Math.round(value);
                },
                from: function (value) {
                    return Number(value);
                }
            }
        });
        
        // Update input fields when slider changes
        priceSlider.noUiSlider.on('update', function (values, handle) {
            const minPrice = document.getElementById('min-price');
            const maxPrice = document.getElementById('max-price');
            
            minPrice.value = values[0];
            maxPrice.value = values[1];
        });
        
        // Update slider when input fields change
        document.getElementById('min-price').addEventListener('change', function () {
            const value = parseInt(this.value);
            priceSlider.noUiSlider.set([value, null]);
        });
        
        document.getElementById('max-price').addEventListener('change', function () {
            const value = parseInt(this.value);
            priceSlider.noUiSlider.set([null, value]);
        });
        
        // Filter chips click event
        document.querySelectorAll('.filter-chip').forEach(chip => {
            chip.addEventListener('click', function() {
                this.classList.toggle('active');
                filterHostels();
            });
        });
        
        // Amenity checkboxes click event
        document.querySelectorAll('.amenity-item').forEach(item => {
            item.addEventListener('click', function() {
                const checkbox = this.querySelector('.amenity-checkbox');
                checkbox.classList.toggle('checked');
                filterHostels();
            });
        });
        
        // Sort options click event
        document.querySelectorAll('.sort-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.sort-option').forEach(opt => {
                    opt.classList.remove('active');
                });
                this.classList.add('active');
                sortHostels(this.dataset.sort);
            });
        });
        
        // Auth tabs click event
        authTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                switchAuthTab(this.dataset.tab);
            });
        });
        
        // Initialize date picker
        flatpickr("#date-range", {
            mode: "range",
            minDate: "today",
            dateFormat: "Y-m-d",
            disableMobile: "true"
        });
        
        // Booking steps navigation
        document.getElementById('step1-continue').addEventListener('click', function() {
            goToStep(2);
        });
        
        document.getElementById('step2-back').addEventListener('click', function() {
            goToStep(1);
        });
        
        document.getElementById('step2-continue').addEventListener('click', function() {
            goToStep(3);
        });
        
        document.getElementById('step3-back').addEventListener('click', function() {
            goToStep(2);
        });
        
        document.getElementById('step3-continue').addEventListener('click', function() {
            goToStep(4);
        });
        
        document.getElementById('step4-done').addEventListener('click', function() {
            closeBookingModal();
            // Would typically navigate to bookings page
            alert('This is a prototype. In the full version, this would navigate to your bookings page.');
        });
        
        // Payment method selection
        document.querySelectorAll('.payment-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.payment-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                this.classList.add('selected');
            });
        });
        
        // Functions
        function toggleSidebar() {
            sidebar.classList.toggle('sidebar-collapsed');
            if (sidebar.classList.contains('sidebar-collapsed')) {
                sidebarToggle.innerHTML = '<i class="fas fa-chevron-left"></i>';
            } else {
                sidebarToggle.innerHTML = '<i class="fas fa-chevron-right"></i>';
            }
        }
        
        function toggleTheme() {
            isDarkTheme = !isDarkTheme;
            document.body.classList.toggle('dark-theme');
            
            if (isDarkTheme) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
        }
        
        // Debounce function for search
        function debounce(func, delay) {
            let timeout;
            return function(...args) {
                const context = this;
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(context, args), delay);
            };
        }

        // Autocomplete location search
        async function searchLocations(query) {
            if (query.length < 3) {
                suggestionBox.style.display = 'none';
                return;
            }

            try {
                const res = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5`);
                const data = await res.json();

                suggestionBox.innerHTML = '';
                if (data.length === 0) {
                    suggestionBox.style.display = 'none';
                    return;
                }

                data.forEach(loc => {
                    const div = document.createElement('div');
                    div.className = 'suggestion-item';
                    div.textContent = loc.display_name;
                    div.addEventListener('click', () => {
                        locationInput.value = loc.display_name;
                        suggestionBox.style.display = 'none';
                        const lat = parseFloat(loc.lat);
                        const lon = parseFloat(loc.lon);
                        map.setView([lat, lon], 14);
                        fetchHostels(lat, lon);
                    });
                    suggestionBox.appendChild(div);
                });

                suggestionBox.style.display = 'block';
            } catch (err) {
                console.error('Error fetching suggestions:', err);
            }
        }

        const debouncedSearch = debounce(searchLocations, 300);

        function getUserLocation() {
            if ('geolocation' in navigator) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    map.setView([lat, lng], 14);
                    
                    // Add user marker
                    L.marker([lat, lng], {
                        icon: L.divIcon({
                            className: 'user-location-marker',
                            html: '<div style="background-color: #007bff; border-radius: 50%; width: 16px; height: 16px; border: 3px solid white;"></div>',
                            iconSize: [22, 22],
                            iconAnchor: [11, 11]
                        })
                    }).addTo(map);
                    
                    // Fetch hostels near this location
                    fetchHostels(lat, lng);
                }, function(error) {
                    console.error("Error getting location", error);
                    alert("Could not get your location. Please allow location access or search for a location.");
                });
            } else {
                alert("Geolocation is not supported by your browser.");
            }
        }
        
        function searchCurrentArea() {
            const center = map.getCenter();
            fetchHostels(center.lat, center.lng);
        }
        
        function handleLocationSearch() {
            debouncedSearch(this.value.trim());
        }

        function getDirections() {
            if (!currentHostelId) {
                alert("Please select a hostel first.");
                return;
            }

            const hostel = hostels.find(h => h.id === currentHostelId);
            if (!hostel) {
                alert("Hostel details not found.");
                return;
            }

            if ('geolocation' in navigator) {
                getDirectionsBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Finding you...';
                getDirectionsBtn.disabled = true;

                navigator.geolocation.getCurrentPosition(position => {
                    const userLatLng = L.latLng(position.coords.latitude, position.coords.longitude);
                    const hostelLatLng = L.latLng(hostel.lat, hostel.lng);

                    // Clear previous route and location watch if they exist
                    if (currentRoutingControl) {
                        map.removeControl(currentRoutingControl);
                    }
                    if (locationWatchId) {
                        navigator.geolocation.clearWatch(locationWatchId);
                    }

                    currentRoutingControl = L.Routing.control({
                        waypoints: [userLatLng, hostelLatLng],
                        routeWhileDragging: true,
                        createMarker: (i, waypoint, n) => {
                            const isUser = i === 0;
                            const popupText = isUser ? 'Your Location' : hostel.name;
                            const icon = isUser 
                                ? L.divIcon({ html: '<div style="background-color: #007bff; border-radius: 50%; width: 16px; height: 16px; border: 3px solid white; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>', className: 'user-location-marker', iconSize: [22, 22], iconAnchor: [11, 11] })
                                : L.divIcon({ html: `<span><i class="fas fa-bed"></i></span>`, className: 'hostel-marker', iconSize: [30, 30], iconAnchor: [15, 30] });
                            
                            return L.marker(waypoint.latLng, { icon, draggable: true }).bindPopup(`<b>${popupText}</b>`);
                        }
                    }).addTo(map);

                    // Start watching user's position for live updates
                    locationWatchId = navigator.geolocation.watchPosition(pos => {
                        const newLatLng = L.latLng(pos.coords.latitude, pos.coords.longitude);
                        // Update the starting waypoint of the route
                        currentRoutingControl.spliceWaypoints(0, 1, newLatLng);
                    });

                    // Close details to show the map
                    closeDetailSheet();
                    sidebar.classList.add('sidebar-collapsed');

                    getDirectionsBtn.innerHTML = '<i class="fas fa-directions"></i> Get Directions';
                    getDirectionsBtn.disabled = false;

                }, error => {
                    alert("Could not get your location. Please allow location access to get directions.");
                    getDirectionsBtn.innerHTML = '<i class="fas fa-directions"></i> Get Directions';
                    getDirectionsBtn.disabled = false;
                });
            } else {
                alert("Geolocation is not supported by your browser.");
            }
        }

        function fetchHostels(lat, lng) {
            // This would typically be an API call to your backend
            // For prototype, we'll use mock data
            
            // Simulate network request
            hostelList.innerHTML = `
                <div class="text-center my-4">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2">Searching for hostels...</p>
                </div>
            `;
            
            setTimeout(() => {
                // Mock hostel data
                hostels = [
                    {
                        id: 1,
                        name: "Urban Backpackers Hostel",
                        location: "Connaught Place, New Delhi",
                        lat: lat + 0.01,
                        lng: lng - 0.01,
                        price: 800,
                        rating: 4.7,
                        bedTypes: ["single", "dormitory"],
                        gender: "unisex",
                        amenities: ["ac", "wifi", "food", "laundry"],
                        distance: 1.2,
                        images: [
                            "https://cdn.pixabay.com/photo/2020/10/18/09/16/bedroom-5664221_960_720.jpg",
                            "https://cdn.pixabay.com/photo/2017/03/28/12/11/chairs-2181960_960_720.jpg",
                            "https://cdn.pixabay.com/photo/2016/11/18/22/21/restaurant-1837150_960_720.jpg"
                        ],
                        description: "Urban Backpackers Hostel offers comfortable and affordable accommodation in the heart of New Delhi. With modern amenities and a friendly atmosphere, it's perfect for travelers looking for a social experience.",
                        roomTypes: [
                            { name: "Single Bed in Mixed Dorm", price: 800, details: "A single bed in a 6-bed mixed dormitory room with AC and shared bathroom." },
                            { name: "Private Room", price: 2500, details: "Private room with double bed, AC, and attached bathroom." }
                        ],
                        reviews: [
                            { name: "John S.", date: "Dec 2024", rating: 5, text: "Great hostel with friendly staff. The location is perfect for exploring Delhi." },
                            { name: "Maria L.", date: "Nov 2024", rating: 4, text: "Clean rooms and good facilities. The common area is nice for meeting other travelers." }
                        ]
                    },
                    {
                        id: 2,
                        name: "Backpackers Haven",
                        location: "Karol Bagh, New Delhi",
                        lat: lat - 0.015,
                        lng: lng + 0.008,
                        price: 600,
                        rating: 4.3,
                        bedTypes: ["dormitory"],
                        gender: "unisex",
                        amenities: ["wifi", "laundry"],
                        distance: 2.5,
                        images: [
                            "https://cdn.pixabay.com/photo/2018/02/24/17/17/window-3178666_960_720.jpg",
                            "https://cdn.pixabay.com/photo/2020/02/01/22/10/house-4811590_960_720.jpg",
                            "https://cdn.pixabay.com/photo/2016/04/15/11/48/hotel-1330850_960_720.jpg"
                        ],
                        description: "Backpackers Haven is a budget-friendly option with a cozy atmosphere. Located in the vibrant Karol Bagh area, it provides easy access to markets, restaurants, and transportation.",
                        roomTypes: [
                            { name: "Bed in 8-Bed Dorm", price: 600, details: "A single bed in an 8-bed mixed dormitory with fans and shared bathrooms." },
                            { name: "Bed in 4-Bed Dorm", price: 900, details: "A single bed in a 4-bed mixed dormitory with fans and shared bathrooms." }
                        ],
                        reviews: [
                            { name: "Alex T.", date: "Dec 2024", rating: 4, text: "Great budget option with decent facilities. The staff are helpful and friendly." },
                            { name: "Sarah K.", date: "Oct 2024", rating: 3, text: "Basic but clean. Good for a short stay if you're on a budget." }
                        ]
                    },
                    {
                        id: 3,
                        name: "Comfort Stay Hostel",
                        location: "Paharganj, New Delhi",
                        lat: lat - 0.005,
                        lng: lng - 0.012,
                        price: 1200,
                        rating: 4.8,
                        bedTypes: ["single", "double"],
                        gender: "unisex",
                        amenities: ["ac", "wifi", "food", "power"],
                        distance: 0.8,
                        images: [
                            "https://cdn.pixabay.com/photo/2016/10/13/09/06/travel-1737168_960_720.jpg",
                            "https://cdn.pixabay.com/photo/2019/05/28/00/15/indoors-4234071_960_720.jpg",
                            "https://cdn.pixabay.com/photo/2017/04/28/22/16/room-2269594_960_720.jpg"
                        ],
                        description: "Comfort Stay Hostel offers premium hostel accommodation with hotel-like amenities. Situated in the bustling Paharganj area, it's walking distance from New Delhi Railway Station and major attractions.",
                        roomTypes: [
                            { name: "Deluxe Private Room", price: 2200, details: "Private room with queen bed, AC, TV, and attached bathroom." },
                            { name: "Twin Private Room", price: 1800, details: "Private room with two single beds, AC, and attached bathroom." },
                            { name: "Single Bed in 4-Bed Dorm", price: 1200, details: "A single bed in a 4-bed mixed dormitory with AC and shared bathroom." }
                        ],
                        reviews: [
                            { name: "Robert J.", date: "Dec 2024", rating: 5, text: "Excellent place! Clean, comfortable, and great facilities. Worth every penny." },
                            { name: "Lisa M.", date: "Nov 2024", rating: 5, text: "One of the best hostels I've stayed in India. Highly recommended!" },
                            { name: "David P.", date: "Oct 2024", rating: 4, text: "Great location and comfortable beds. The staff are very helpful." }
                        ]
                    },
                    {
                        id: 4,
                        name: "Women's Paradise Hostel",
                        location: "Greater Kailash, New Delhi",
                        lat: lat + 0.02,
                        lng: lng + 0.018,
                        price: 1500,
                        rating: 4.9,
                        bedTypes: ["single", "double"],
                        gender: "female",
                        amenities: ["ac", "wifi", "food", "laundry", "power"],
                        distance: 3.7,
                        images: [
                            "https://cdn.pixabay.com/photo/2018/01/29/07/55/modern-minimalist-bedroom-3115540_960_720.jpg",
                            "https://cdn.pixabay.com/photo/2018/07/14/17/19/interior-3538020_960_720.jpg",
                            "https://cdn.pixabay.com/photo/2017/08/27/10/16/interior-2685522_960_720.jpg"
                        ],
                        description: "Women's Paradise Hostel is a female-only accommodation offering a safe and comfortable environment. Located in the upscale Greater Kailash area, it provides a peaceful retreat with excellent security.",
                        roomTypes: [
                            { name: "Single Room", price: 2000, details: "Private room with single bed, AC, TV, and attached bathroom." },
                            { name: "Twin Sharing Room", price: 1500, details: "Room with two single beds, AC, and attached bathroom." }
                        ],
                        reviews: [
                            { name: "Emma W.", date: "Dec 2024", rating: 5, text: "Safe, clean, and comfortable. Perfect for female travelers!" },
                            { name: "Sophie L.", date: "Nov 2024", rating: 5, text: "The security and comfort level are amazing. Felt like a home away from home." },
                            { name: "Olivia R.", date: "Oct 2024", rating: 5, text: "Excellent facilities and very helpful staff. The location is great too." }
                        ]
                    },
                    {
                        id: 5,
                        name: "Budget Bros Hostel",
                        location: "Rajouri Garden, New Delhi",
                        lat: lat - 0.025,
                        lng: lng - 0.02,
                        price: 500,
                        rating: 4.0,
                        bedTypes: ["dormitory"],
                        gender: "male",
                        amenities: ["wifi"],
                        distance: 5.2,
                        images: [
                            "https://cdn.pixabay.com/photo/2017/01/07/17/48/interior-1961070_960_720.jpg",
                            "https://cdn.pixabay.com/photo/2017/03/19/01/18/living-room-2155376_960_720.jpg",
                            "https://cdn.pixabay.com/photo/2017/07/09/03/19/home-2486092_960_720.jpg"
                        ],
                        description: "Budget Bros Hostel is a male-only budget accommodation perfect for backpackers. With basic amenities and affordable rates, it's ideal for travelers looking to save on accommodation costs.",
                        roomTypes: [
                            { name: "Bed in 10-Bed Dorm", price: 500, details: "A single bed in a 10-bed dormitory with fans and shared bathrooms." },
                            { name: "Bed in 6-Bed Dorm", price: 700, details: "A single bed in a 6-bed dormitory with fans and shared bathrooms." }
                        ],
                        reviews: [
                            { name: "Mike T.", date: "Dec 2024", rating: 4, text: "Great value for money. Basic but clean." },
                            { name: "James L.", date: "Nov 2024", rating: 3, text: "Decent place if you're on a tight budget. Could use better facilities." },
                            { name: "Chris P.", date: "Oct 2024", rating: 4, text: "Friendly atmosphere and good for meeting other travelers." }
                        ]
                    }
                ];
                
                // Add markers to map
                hostels.forEach(hostel => {
                    const marker = L.marker([hostel.lat, hostel.lng], {
                        icon: L.divIcon({
                            className: 'hostel-marker',
                            html: `<span>â‚¹${hostel.price}</span>`,
                            iconSize: [30, 30],
                            iconAnchor: [15, 30]
                        })
                    }).addTo(map);
                    
                    // Create popup
                    const popupContent = `
                        <div class="hostel-popup">
                            <img src="${hostel.images[0]}" alt="${hostel.name}" style="width: 100%; height: 80px; object-fit: cover; border-radius: 5px; margin-bottom: 5px;">
                            <strong>${hostel.name}</strong><br>
                            <small>${hostel.location}</small><br>
                            <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                                <span><strong>â‚¹${hostel.price}</strong>/night</span>
                                <span style="background: #5E17EB; color: white; padding: 2px 5px; border-radius: 3px; font-size: 0.8rem;">
                                    <i class="fas fa-star" style="font-size: 0.7rem;"></i> ${hostel.rating}
                                </span>
                            </div>
                        </div>
                    `;
                    
                    marker.bindPopup(popupContent);
                    
                    marker.on('click', function() {
                        openDetailSheet(hostel.id);
                    });
                });
                
                // Render hostel list
                renderHostelList();
            }, 1500);
        }
        
        function renderHostelList() {
            if (hostels.length === 0) {
                hostelList.innerHTML = `
                    <div class="text-center py-4">
                        <i class="fas fa-search" style="font-size: 2rem; color: #ccc; margin-bottom: 10px;"></i>
                        <p>No hostels found in this area. Try expanding your search.</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            hostels.forEach(hostel => {
                html += `
                    <div class="hostel-card" data-id="${hostel.id}">
                        <img src="${hostel.images[0]}" alt="${hostel.name}" class="hostel-image">
                        <div class="hostel-content">
                            <h5 class="hostel-title">${hostel.name}</h5>
                            <div class="hostel-location">
                                <i class="fas fa-map-marker-alt"></i> ${hostel.location}
                            </div>
                            <div class="hostel-features">
                                ${hostel.amenities.includes('wifi') ? '<div class="hostel-feature"><i class="fas fa-wifi"></i> WiFi</div>' : ''}
                                ${hostel.amenities.includes('ac') ? '<div class="hostel-feature"><i class="fas fa-snowflake"></i> AC</div>' : ''}
                                ${hostel.amenities.includes('food') ? '<div class="hostel-feature"><i class="fas fa-utensils"></i> Food</div>' : ''}
                            </div>
                            <div class="hostel-bottom">
                                <div class="hostel-price">â‚¹${hostel.price} / night</div>
                                <div class="hostel-rating">
                                    <i class="fas fa-star"></i> ${hostel.rating}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            hostelList.innerHTML = html;
            
            // Add click event to each hostel card
            document.querySelectorAll('.hostel-card').forEach(card => {
                card.addEventListener('click', function() {
                    const id = parseInt(this.dataset.id);
                    openDetailSheet(id);
                });
            });
        }
        
        function filterHostels() {
            // In a real app, this would filter based on the active filters
            // For prototype, we'll just rerender the list
            renderHostelList();
        }
        
        function sortHostels(sortBy) {
            // In a real app, this would sort the hostels list
            // For prototype, we'll just log the sort preference
            console.log(`Sorting hostels by: ${sortBy}`);
        }
        
        function openDetailSheet(id) {
            currentHostelId = id;
            const hostel = hostels.find(h => h.id === id);
            
            if (!hostel) return;
            
            // Set hostel details
            document.getElementById('detail-title').textContent = hostel.name;
            document.getElementById('detail-location').innerHTML = `
                <i class="fas fa-map-marker-alt"></i>
                <span>${hostel.location}</span>
            `;
            document.getElementById('detail-rating').textContent = hostel.rating;
            document.getElementById('detail-description').textContent = hostel.description;
            document.getElementById('book-price').textContent = hostel.price;
            
            // Set review data
            document.getElementById('review-rating').textContent = hostel.rating;
            document.getElementById('review-count').textContent = `Based on ${hostel.reviews.length} reviews`;
            
            // Clear previous images
            document.getElementById('carousel-images').innerHTML = '';
            document.getElementById('carousel-controls').innerHTML = '';
            
            // Add images to carousel
            hostel.images.forEach((image, index) => {
                document.getElementById('carousel-images').innerHTML += `
                    <img src="${image}" alt="${hostel.name}" ${index === 0 ? 'class="active"' : ''}>
                `;
                
                document.getElementById('carousel-controls').innerHTML += `
                    <div class="carousel-dot ${index === 0 ? 'active' : ''}" data-index="${index}"></div>
                `;
            });
            
            // Add click event to carousel dots
            document.querySelectorAll('.carousel-dot').forEach(dot => {
                dot.addEventListener('click', function() {
                    const index = parseInt(this.dataset.index);
                    const width = document.getElementById('carousel-images').querySelector('img').offsetWidth;
                    document.getElementById('carousel-images').style.transform = `translateX(-${index * width}px)`;
                    
                    document.querySelectorAll('.carousel-dot').forEach(d => {
                        d.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });
            
            // Set facilities
            const facilitiesHtml = hostel.amenities.map(amenity => {
                let icon, name;
                switch(amenity) {
                    case 'ac':
                        icon = 'snowflake';
                        name = 'Air Conditioning';
                        break;
                    case 'wifi':
                        icon = 'wifi';
                        name = 'Free WiFi';
                        break;
                    case 'food':
                        icon = 'utensils';
                        name = 'Food Included';
                        break;
                    case 'laundry':
                        icon = 'tshirt';
                        name = 'Laundry Service';
                        break;
                    case 'power':
                        icon = 'bolt';
                        name = 'Power Backup';
                        break;
                    default:
                        icon = 'check';
                        name = amenity;
                }
                
                return `
                    <div class="facility">
                        <i class="fas fa-${icon}"></i>
                        <span>${name}</span>
                    </div>
                `;
            }).join('');
            
            document.getElementById('detail-facilities').innerHTML = facilitiesHtml;
            
            // Set room types
            const roomTypesHtml = hostel.roomTypes.map(room => {
                return `
                    <div class="room-type">
                        <div class="room-type-header">
                            <div class="room-type-name">${room.name}</div>
                            <div class="room-type-price">â‚¹${room.price} / night</div>
                        </div>
                        <div class="room-type-details">${room.details}</div>
                        <div class="availability-dates">
                            ${generateAvailabilityDates()}
                        </div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('room-types').innerHTML = roomTypesHtml;
            
            // Set reviews
            const reviewsHtml = hostel.reviews.map(review => {
                return `
                    <div class="review-item">
                        <div class="review-header">
                            <div class="reviewer-name">${review.name}</div>
                            <div class="review-date">${review.date}</div>
                        </div>
                        <div class="review-rating-stars">
                            ${generateStars(review.rating)}
                        </div>
                        <div class="review-text">${review.text}</div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('reviews-list').innerHTML = reviewsHtml;
            
            // Setup booking modal
            setupBookingModal(hostel);
            
            // Show detail sheet
            detailSheet.style.display = 'block';
            setTimeout(() => {
                document.querySelector('.detail-content').classList.add('active');
            }, 10);
        }
        
        function generateAvailabilityDates() {
            // Generate random availability for next 7 days (just for prototype)
            const today = new Date();
            let html = '';
            
            for (let i = 0; i < 7; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                
                const day = date.toLocaleDateString('en-US', { weekday: 'short' });
                const dateNum = date.getDate();
                
                const isAvailable = Math.random() > 0.3; // 70% chance of being available
                
                html += `
                    <div class="date-block ${isAvailable ? 'available' : 'unavailable'}">
                        <div class="date">${dateNum}</div>
                        <div class="day">${day}</div>
                    </div>
                `;
            }
            
            return html;
        }
        
        function generateStars(rating) {
            let html = '';
            
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) {
                    html += '<i class="fas fa-star"></i> ';
                } else if (i - 0.5 <= rating) {
                    html += '<i class="fas fa-star-half-alt"></i> ';
                } else {
                    html += '<i class="far fa-star"></i> ';
                }
            }
            
            return html;
        }
        
        function closeDetailSheet() {
            document.querySelector('.detail-content').classList.remove('active');
            setTimeout(() => {
                detailSheet.style.display = 'none';
            }, 300);
        }
        
        function setupBookingModal(hostel) {
            // Add room options to booking modal
            const roomSelector = document.getElementById('room-selector');
            roomSelector.innerHTML = '';
            
            hostel.roomTypes.forEach((room, index) => {
                roomSelector.innerHTML += `
                    <div class="room-option ${index === 0 ? 'selected' : ''}" data-room-index="${index}" data-price="${room.price}">
                        <div class="room-option-header">
                            <div class="room-option-name">${room.name}</div>
                            <div class="room-option-price">â‚¹${room.price} / night</div>
                        </div>
                        <div class="room-option-details">${room.details}</div>
                    </div>
                `;
            });
            
            // Select first room by default
            selectedRoomType = hostel.roomTypes[0];
            
            // Add click event to room options
            document.querySelectorAll('.room-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.room-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    
                    const index = parseInt(this.dataset.roomIndex);
                    selectedRoomType = hostel.roomTypes[index];
                    
                    // Update price in summary
                    updateBookingSummary();
                });
            });
            
            // Set initial summary
            updateBookingSummary();
            
            // Set confirmation details
            document.getElementById('booking-hostel').textContent = hostel.name;
            document.getElementById('booking-id').textContent = 'BK' + Math.floor(Math.random() * 100000000);
        }
        
        function updateBookingSummary() {
            if (!selectedRoomType) return;
            
            const basePrice = selectedRoomType.price;
            const taxes = Math.round(basePrice * 0.1); // 10% taxes
            const total = basePrice + taxes;
            
            document.getElementById('room-charges').textContent = basePrice;
            document.getElementById('taxes-fees').textContent = taxes;
            document.getElementById('total-amount').textContent = total;
            document.getElementById('payment-total').textContent = total;
        }
        
        function openBookingModal() {
            if (!currentHostelId) return;
            
            // Reset to step 1
            goToStep(1);
            
            // Show modal
            bookingModal.style.display = 'flex';
            setTimeout(() => {
                bookingModal.classList.add('active');
            }, 10);
        }
        
        function closeBookingModal() {
            bookingModal.classList.remove('active');
            setTimeout(() => {
                bookingModal.style.display = 'none';
            }, 300);
        }
        
        function goToStep(step) {
            currentStep = step;
            
            // Update step indicators
            document.querySelectorAll('.booking-step').forEach(s => {
                s.classList.remove('active');
            });
            document.querySelector(`.booking-step[data-step="${step}"]`).classList.add('active');
            
            // Show the current step form
            document.querySelectorAll('.booking-form').forEach(form => {
                form.style.display = 'none';
            });
            document.getElementById(`booking-step-${step}`).style.display = 'block';
            
            // If it's the confirmation step, set the booking details
            if (step === 4) {
                const dateRange = document.getElementById('date-range').value;
                const dates = dateRange.split(' to ');
                
                // Format dates
                let checkin = dates[0] || 'Not selected';
                let checkout = dates[1] || 'Not selected';
                
                if (checkin !== 'Not selected') {
                    const checkinDate = new Date(checkin);
                    checkin = checkinDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
                }
                
                if (checkout !== 'Not selected') {
                    const checkoutDate = new Date(checkout);
                    checkout = checkoutDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
                }
                
                document.getElementById('booking-checkin').textContent = checkin;
                document.getElementById('booking-checkout').textContent = checkout;
                document.getElementById('booking-roomtype').textContent = selectedRoomType ? selectedRoomType.name : 'Not selected';
                document.getElementById('booking-guests').textContent = document.getElementById('guest-count').value;
                document.getElementById('booking-amount').textContent = 'â‚¹' + document.getElementById('total-amount').textContent;
            }
        }
        
        function openAuthModal(tab) {
            // Set the active tab
            switchAuthTab(tab);
            
            // Show modal
            authModal.style.display = 'flex';
            setTimeout(() => {
                authModal.classList.add('active');
            }, 10);
        }
        
        function closeAuthModal() {
            authModal.classList.remove('active');
            setTimeout(() => {
                authModal.style.display = 'none';
            }, 300);
        }
        
        function switchAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => {
                t.classList.remove('active');
            });
            document.querySelector(`.auth-tab[data-tab="${tab}"]`).classList.add('active');
            
            if (tab === 'login') {
                document.getElementById('auth-title').textContent = 'Login';
                document.getElementById('login-form').style.display = 'block';
                document.getElementById('register-form').style.display = 'none';
            } else {
                document.getElementById('auth-title').textContent = 'Register';
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('register-form').style.display = 'block';
            }
        }
        
        // Initialize by showing some default hostels
        // In reality, this would either get user location or show popular destinations
        fetchHostels(28.6139, 77.2090); // Default to New Delhi for prototype
    </script>
</body>
</html>